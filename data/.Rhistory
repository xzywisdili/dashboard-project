data("Titanic")
Titanic
Titanic
as.data.frame(Titanic)
?Titanic
apply(Titanic, c(3, 4), sum)
apply(Titanic, c(2, 4), sum)
apply(Titanic, c(1, 4), sum)
data("Titanic")
# Construct a table
apply(Titanic, c(1, 4), sum)
library(tidyverse)
Titanic %>% as_tibble()
install.packages("titanic")
library(titanic)
Titanic
titanic <- read.csv("titanic.csv")
titanic
table(titanic$Pclass, titanic$Survived)
titanic <- read.csv("titanic.csv")
# Construct a table
table(titanic$Pclass, titanic$Survived)
titanic$Survived
factor(titanic$Pclass)
library(sandwich)
library(lmtest)
# Convert variables
titanic$Survived <- ifelse(titanic_df$Survived == "Yes", 1, 0)
library(sandwich)
library(lmtest)
# Convert variable
titanic$Pclass <- factor(titanic$Pclass, levels = c("1st", "2nd", "3rd"))
# Fit Linear Probability Model
lpm <- lm(Survived ~ PClass, data = titanic)
library(sandwich)
library(lmtest)
# Convert variable
titanic$Pclass <- factor(titanic$Pclass, levels = c("1st", "2nd", "3rd"))
# Fit Linear Probability Model
lpm <- lm(Survived ~ Pclass, data = titanic)
titanic$Pclass
titanic <- read.csv("titanic.csv")
# Construct a table
table(titanic$Pclass, titanic$Survived)
library(sandwich)
library(lmtest)
# Convert variable
titanic$Pclass <- factor(titanic$Pclass)
# Fit Linear Probability Model
lpm <- lm(Survived ~ Pclass, data = titanic)
# Robust SE
coeftest(lpm, vcov = vcovHC(lpm, type = "HC1"))
library(ggeffects)
# Fit Logistic Regression Model
logit_model <- glm(Survived ~ Pclass, data = titanic, family = binomial)
summary(logit_model)
# Visualization with ggeffects
# Compute predicted probabilities by class
gge_logit <- ggpredict(logit_mod, terms = "Pclass")
# Visualization with ggeffects
# Compute predicted probabilities by class
gge_logit <- ggpredict(logit_model, terms = "Pclass")
plot(gge_logit)
# Visualization with ggeffects
# Compute predicted probabilities by class
gge_logit <- ggpredict(logit_model, terms = "Pclass")
plot(gge_logit, colors="hero")
# Visualization with ggeffects
# Compute predicted probabilities by class
gge_logit <- ggpredict(logit_model, terms = "Pclass")
plot(gge_logit, colors="hero")
# Visualization with ggeffects
# Compute predicted probabilities by class
gge_logit <- ggpredict(logit_model, terms = "Pclass")
plot(gge_logit, colors="hero")
# Fit Logistic Regression Model with Interaction
logit_model_inter <- glm(
Survived ~ Pclass * Age, data = titanic, family = binomial)
summary(logit_model_inter)
# Fit Logistic Regression Model with Interaction
logit_model_inter <- glm(
Survived ~ Pclass * Age,
data = titanic,
subset = (!is.na(Age), !is.na(Pclass)),
# Fit Logistic Regression Model with Interaction
logit_model_inter <- glm(
Survived ~ Pclass * Age,
data = titanic,
subset = (!is.na(Age) & !is.na(Pclass)),
family = binomial
)
summary(logit_model_inter)
library(gtsummary)
tbl_regression(logit_model_inter, exponentiate = T)
# Visualization with ggeffects
# Compute predicted probabilities by class
gge_logit <- ggpredict(logit_model_inter)
plot(gge_logit, colors="hero")
# Visualization with ggeffects
# Compute predicted probabilities by class
gge_logit <- ggpredict(logit_model_inter, terms = c("Age [0:80 by=5]", "Pclass"))
plot(gge_logit, colors="hero")
# Fit Linear Probability Model with Interaction
lpm_inter <- lm(Survived ~ Pclass * Age, data = titanic,
subset = (!is.na(Age) & !is.na(Pclass)))
# Robust SE
coeftest(lpm_inter, vcov = vcovHC(lpm_inter, type = "HC1"))
1669.35 + 3.23 + 135118.24
98035.44 + 234626.87 + 44548.84
377211.2 + 136790.8
1010 + 41.40
170.58 + 39.90 + 438 + 159 + 147 + 99 + 99 + 294 + 119
668 + 323 + 252 + 249 + 197 + 129 + 413.11 + 158.83
189 + 130.85
96.10 + 27.52
25.50 + 399
2389.94 + 432.32 + 1565.48 + 424.5 + 319.85 + 101.5 + 123.62 + 91.60 + 80 + 64.85
# 解决 R 语言代理问题
proxy <- "http://127.0.0.1:10808"
Sys.setenv(http_proxy=proxy, https_proxy=proxy)
library(httr)
set_config(use_proxy(url="127.0.0.1", port=10808))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(knitr)
library(dplyr)
library(DBI)
library(RPostgres)
library(dbplyr)
library(haven)
library(modelsummary)
library(ggplot2)
library(stargazer)
library(lubridate)
library(data.table)
wrds <-
dbConnect(
Postgres(),
host = 'wrds-pgdata.wharton.upenn.edu',
port = 9737,
sslmode = 'require',
dbname = 'wrds',
user = 'lokyin',
password = 'goqcob-mytxok-gebPo8'
)
1669.35 + 3.23 + 35118.24
100338.3 + 20850.43
100338.3 + 20850.43 + 215.27
213561.08 + 98035.44 + 44548.84
setwd("D:/BaiduSyncdisk/work_project/2025年11月/20251126-maggie #未完成/dashboard-project/dashboard-project/data/")
sf1 <- st_read("DOH_CommunityMentalHealthCenters202106.geojson")
library(sf)
sf1 <- st_read("DOH_CommunityMentalHealthCenters202106.geojson")
sf2 <- st_read("DOH_HomeHealthAgencies202208.geojson")
sf3 <- st_read("DOH_Hospitals202311.geojson")
sf4 <- st_read("DOH_IntermediateCareFacilities202212.geojson")
ggplot(sf1) + geom_sf()
ggplot(sf2) + geom_sf()
ggplot(sf3) + geom_sf()
ggplot(sf4) + geom_sf()
sf1
sf2
df3
sf3
sf4
